let Rc,Gc,Bc;self.onmessage=(e=>{const a=e.data.key;if(e.data.Rc&&e.data.Gc&&e.data.Bc)Rc=new Uint8ClampedArray(e.data.Rc),Gc=new Uint8ClampedArray(e.data.Gc),Bc=new Uint8ClampedArray(e.data.Bc),self.postMessage({result:!0});else{const t=new Uint8ClampedArray(e.data.img),c=new Uint8ClampedArray(t),l=e.data.width,s=e.data.height;try{for(let e=0;e<s;++e)for(let a=0;a<l;++a){let s=4*a+e*l*4;c[s]=Rc[t[s]],c[s+1]=Gc[t[s+1]],c[s+2]=Bc[t[s+2]],c[s+3]=t[s+3]}self.postMessage({filter:c.buffer,width:l,height:s,key:a},[c.buffer])}catch(e){console.warn(e),self.postMessage({filter:null,key:a})}}});